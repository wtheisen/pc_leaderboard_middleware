{% extends "base.html" %}
{% block body %}

<style>
    .custom-card {
        border-radius: 10px;
        padding: 10px;
        border: 2px solid #1a1a1a;
    }
</style>

<h1>Submissions for {{ assignment_name }}</h1>

<div class="row mb-4">
    <div class="col-md-4 mb-3">
        <div class="card text-white bg-success custom-card">
            <div class="card-body">
                <h5 class="card-title">Submission Count</h5>
                <p class="card-text">{{ stats.submission_count }}</p>
            </div>
        </div>
    </div>
    <div class="col-md-4 mb-3">
        <div class="card text-white bg-success custom-card">
            <div class="card-body">
                <h5 class="card-title">Average Code Score</h5>
                <p class="card-text">{{ "%.2f"|format(stats.avg_code_score) }}</p>
            </div>
        </div>
    </div>
    <div class="col-md-4 mb-3">
        <div class="card text-white bg-info custom-card">
            <div class="card-body">
                <h5 class="card-title">Average Runtime</h5>
                <p class="card-text">{{ "%.3f"|format(stats.avg_runtime) }}s</p>
            </div>
        </div>
    </div>
</div>

<br>

<div class="row mb-4">
    <div class="col-md-4 mb-3">
        <div class="card text-white bg-warning custom-card">
            <div class="card-body">
                <h5 class="card-title">Average Lint Errors</h5>
                <p class="card-text">{{ "%.2f"|format(stats.avg_lint_errors) }}</p>
            </div>
        </div>
    </div>
    <div class="col-md-4 mb-3">
        <div class="card text-white bg-danger custom-card">
            <div class="card-body">
                <h5 class="card-title">Fastest Runtime</h5>
                <p class="card-text">{{ "%.3f"|format(stats.fastest_runtime) }}s</p>
            </div>
        </div>
    </div>
    <div class="col-md-4 mb-3">
        <div class="card text-white bg-secondary custom-card">
            <div class="card-body">
                <h5 class="card-title">Highest Code Score</h5>
                <p class="card-text">{{ "%.2f"|format(stats.highest_code_score) }}</p>
            </div>
        </div>
    </div>
</div>

<br>

<div class="row">
    <table class="table condensed table-striped" border="2px solid black">
        <tr>
            <th>Time</th>
            <th>Student</th>
            <th>Code Score</th>
            <th>Runtime (s)</th>
            <th>Lint Errors</th>
            <th>Status</th>
        </tr>
        {% for sub in submissions %}
        <tr>
            <td>{{ sub.submission_time.strftime('%Y-%m-%d %H:%M:%S') }}</td>
            <td><a href="{{ url_for('student_view', name=sub.student_id) }}">
                {{ sub.display_name }}</a></td>
            <td>{{ "%.2f"|format(sub.code_score) }}</td>
            <td>{{ "%.3f"|format(sub.runtime) }}</td>
            <td>{{ "%.2f"|format(sub.lint_errors) }}</td>
            <td>{{ sub.status }}</td>
        </tr>
        {% endfor %}
    </table>
</div>
{% endblock %}
