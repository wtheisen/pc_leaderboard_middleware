{% extends "base.html" %}
{% block body %}

<h1>Submissions for {{ student_id }}</h1>

<div class="row">
    <div class="col-md-4">
        <h3>Average Code Score</h3>
            <p>{{ "%.2f"|format(avg_code_score) }}</p>
    </div>
    <div class="col-md-4">
        <h3>Average Runtime</h3>
        <p>{{ "%.3f"|format(avg_runtime) }}s</p>
    </div>
    <div class="col-md-4">
        <h3>Average Lint Errors</h3>
        <p>{{ "%.2f"|format(avg_lint_errors) }}</p>
    </div>
</div>

<div class="row">
    <table class="table condensed table-striped" border="2px solid black">
        <tr>
            <th>Time</th>
            <th>Assignment</th>
            <th>Code Score</th>
            <th>Runtime (s)</th>
            <th>Lint Errors</th>
            <th>Status</th>
    </tr>
    {% for sub in submissions %}
    <tr>
        <td>{{ sub.submission_time.strftime('%Y-%m-%d %H:%M:%S') }}</td>
        <td><a href="{{ url_for('assignment_view', name=sub.assignment) }}">
            {{ sub.assignment }}</a></td>
        <td>{{ "%.2f"|format(sub.code_score) }}</td>
        <td>{{ "%.3f"|format(sub.runtime) }}</td>
        <td>{{ "%.2f"|format(sub.lint_errors) }}</td>
        <td>{{ sub.status }}</td>
    </tr>
    {% endfor %}
</table>
</div>

<div class="container">
    <h3>Update Display Name</h3>
    <form method="POST">
        {{ form.hidden_tag() }}
        <div class="form-group">
            {{ form.real_name.label }}<br>
            {{ form.real_name(size=32, class="form-control") }}
        </div>
        <div class="form-group">
            {{ form.display_real_name() }} {{ form.display_real_name.label }}
        </div>
        <div class="form-group">
            {{ form.secret_token.label }}<br>
            {{ form.secret_token(size=32, class="form-control") }}
            {% for error in form.secret_token.errors %}
                <span class="text-danger">{{ error }}</span>
            {% endfor %}
        </div>
        <div class="form-group">
            {{ form.submit(class="btn btn-primary") }}
        </div>
    </form>
</div>

{% endblock %}
